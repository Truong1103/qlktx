<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xác nhận vào ở - Hệ thống KTX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <img src="Logo_van_lang.webp.png" alt="Logo" class="h-12 w-auto mr-4">
                    <a href="student-dashboard.html" class="text-xl font-bold text-gray-800">Hệ thống Quản lý KTX</a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="student-dashboard.html" class="text-gray-700 hover:text-gray-900">Dashboard</a>
                    <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition">
                        Đăng xuất
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-4xl mx-auto py-6 sm:px-6 lg:px-8">
        <div class="px-4 py-6 sm:px-0">
            <h1 class="text-3xl font-bold text-gray-900 mb-6">Xác nhận & Hoàn tất thủ tục vào ở KTX</h1>

            <!-- Registration Status -->
            <div id="registrationStatus" class="bg-white shadow-lg rounded-lg p-6 mb-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">Trạng thái đăng ký</h2>
                <div id="statusContent">
                    <p class="text-gray-500">Đang tải...</p>
                </div>
            </div>

            <!-- Step 1: Confirm Reservation -->
            <div id="step1" class="bg-white shadow-lg rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">1. Xác nhận giữ chỗ</h2>
                <div class="space-y-4">
                    <div class="bg-blue-50 border-l-4 border-blue-400 p-4">
                        <p class="text-sm text-blue-700">
                            Đơn đăng ký của bạn đã được duyệt. Vui lòng xác nhận giữ chỗ trong thời hạn quy định.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Phòng được phân</label>
                            <input type="text" id="assignedRoom" readonly
                                class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Thời hạn xác nhận</label>
                            <input type="text" id="confirmDeadline" readonly
                                class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100">
                        </div>
                    </div>
                    <button onclick="confirmReservation()" 
                        class="w-full md:w-auto px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">
                        Xác nhận giữ chỗ
                    </button>
                </div>
            </div>

            <!-- Step 2: Payment -->
            <div id="step2" class="bg-white shadow-lg rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">2. Thanh toán phí giữ chỗ/đầu vào</h2>
                <div class="space-y-4">
                    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                        <p class="text-sm text-yellow-700">
                            Vui lòng thanh toán phí giữ chỗ trong thời hạn quy định để hoàn tất thủ tục.
                        </p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Số tiền cần thanh toán</label>
                            <input type="text" id="paymentAmount" readonly
                                class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 font-semibold text-lg">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Thời hạn thanh toán</label>
                            <input type="text" id="paymentDeadline" readonly
                                class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100">
                        </div>
                    </div>
                    <button onclick="goToPayment()" 
                        class="w-full md:w-auto px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">
                        Thanh toán Online
                    </button>
                </div>
            </div>

            <!-- Step 3: Schedule Appointment -->
            <div id="step3" class="bg-white shadow-lg rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">3. Đăng ký lịch hẹn</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Chọn ngày hẹn</label>
                        <input type="date" id="appointmentDate" 
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Chọn giờ hẹn</label>
                        <select id="appointmentTime" 
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="">-- Chọn giờ --</option>
                            <option value="08:00">08:00</option>
                            <option value="09:00">09:00</option>
                            <option value="10:00">10:00</option>
                            <option value="14:00">14:00</option>
                            <option value="15:00">15:00</option>
                            <option value="16:00">16:00</option>
                        </select>
                    </div>
                    <button onclick="scheduleAppointment()" 
                        class="w-full md:w-auto px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                        Đăng ký lịch hẹn
                    </button>
                </div>
            </div>

            <!-- Step 4: Sign Contract -->
            <div id="step4" class="bg-white shadow-lg rounded-lg p-6 mb-6 hidden">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">4. Ký biên bản bàn giao phòng</h2>
                <div class="space-y-4">
                    <div class="bg-green-50 border-l-4 border-green-400 p-4">
                        <p class="text-sm text-green-700">
                            Vui lòng đọc và ký biên bản bàn giao phòng trước khi nhận chìa khóa.
                        </p>
                    </div>
                    <div class="border rounded-lg p-4 max-h-96 overflow-y-auto">
                        <h3 class="font-semibold mb-2">Biên bản bàn giao phòng</h3>
                        <p class="text-sm text-gray-700 mb-4">
                            Bên giao: Ban Quản lý Ký túc xá<br>
                            Bên nhận: <span id="contractStudentName"></span><br>
                            Phòng: <span id="contractRoom"></span><br>
                            Ngày: <span id="contractDate"></span>
                        </p>
                        <p class="text-sm text-gray-700">
                            Tôi xác nhận đã nhận phòng và các tài sản trong phòng theo đúng tình trạng hiện tại.
                        </p>
                    </div>
                    <div class="flex items-start">
                        <input type="checkbox" id="agreeContract" 
                            class="mt-1 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                        <label for="agreeContract" class="ml-2 block text-sm text-gray-900">
                            Tôi đồng ý với các điều khoản trong biên bản bàn giao phòng
                        </label>
                    </div>
                    <button onclick="signContract()" 
                        class="w-full md:w-auto px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">
                        Ký biên bản
                    </button>
                </div>
            </div>

            <!-- Completed Status -->
            <div id="completed" class="bg-green-50 border-l-4 border-green-400 p-6 hidden">
                <h2 class="text-xl font-semibold text-green-900 mb-2">Hoàn tất thủ tục</h2>
                <p class="text-green-700">
                    Bạn đã hoàn tất tất cả các thủ tục. Vui lòng đến KTX theo lịch hẹn để nhận chìa khóa và thẻ KTX.
                </p>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="student-confirm.js"></script>
</body>
</html>

